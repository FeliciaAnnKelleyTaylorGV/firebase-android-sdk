These are the steps to build the release files for Firebase Data Connect.

1. ./gradlew :firebase-dataconnect:publishAllPublicationsToBuildDirRepository  :firebase-common:publishAllPublicationsToBuildDirRepository
2. Copy these files into the ZIP file that gets distributed:
    - firebase-dataconnect/build/outputs/aar/firebase-dataconnect-release.aar
    - firebase-dataconnect/build/intermediates/source_jar/release/release-sources.jar
    - firebase-common/build/outputs/aar/firebase-common-release.aar
    - firebase-common/build/intermediates/source_jar/release/release-sources.jar

Here are the steps to incorporate Firebase Data Connect into your app.

1. Launch Android Studio
2. Create a new project using one of the templates; choose "Kotlin DSL" for the "Build Configuration Language", or
   else you will have to translate the instructions accordingly for Groovy.
3. Copy your `google-services.json` into the `app` directory.
4. Create a directory `app/libs` and copy `firebase-dataconnect-release.aar` and `firebase-common-release.aar`
   into that directory.

5. Open `app/build.gradle.kts` and make these changes:
    a. In the `plugins {` section at the top, add these lines:

```
// NOTE: "1.9.0" should be changed to match the version of org.jetbrains.kotlin.android:kotlin that is used.
kotlin("plugin.serialization") version "1.9.0"
// This is documented here: https://firebase.google.com/docs/android/setup#analytics-not-enabled
id("com.google.gms.google-services") version "4.4.1"
```

    b. In the `dependencies {` section at the top, add these lines:

```
implementation(files("libs/firebase-dataconnect-release.aar"))
implementation(files("libs/firebase-common-release.aar"))

implementation(platform("com.google.firebase:firebase-bom:32.8.1"))
// NOTE: Include firebase-auth even if you're not using authentication because one of its transitive
// dependencies, firebase-components, is required by firebase-dataconnect.
implementation("com.google.firebase:firebase-auth") {
  exclude(group = "com.google.firebase", module = "firebase-common")
}

implementation("org.jetbrains.kotlinx:kotlinx-serialization-core:1.5.0")
implementation("org.jetbrains.kotlinx:kotlinx-coroutines-android:1.7.3")

implementation("io.grpc:grpc-android:1.57.2")
implementation("io.grpc:grpc-okhttp:1.57.2")
implementation("io.grpc:grpc-protobuf-lite:1.57.2")
implementation("io.grpc:grpc-stub:1.57.2")
implementation("io.grpc:grpc-kotlin-stub:1.4.0")
implementation("com.google.protobuf:protobuf-javalite:3.24.0")
implementation("com.google.protobuf:protobuf-kotlin-lite:3.24.0")
```

6. Open `app/src/main/java/com/google/myapplication/MainActivity.kt` and make these changes:
   a. Add the following imports:

```
import android.util.Log
import androidx.lifecycle.lifecycleScope
import com.google.firebase.dataconnect.FirebaseDataConnect
import com.google.firebase.dataconnect.LogLevel
import com.google.firebase.dataconnect.logLevel
import kotlinx.coroutines.ensureActive
import kotlinx.coroutines.launch
```

  b. Add the following to `onCreate()`

```
lifecycleScope.launch {
  val result = runCatching {
    FirebaseDataConnect.logLevel = LogLevel.DEBUG
    // NOTE: Replace `MyConnector` with the name of your connector as generated by codegen.
    val connector = MyConnector.instance
    connector.dataConnect.useEmulator()

    // TODO: fill in with code that uses `connector`.
  }
  ensureActive()
  result.fold(
    onSuccess = { Log.i("zzyzx", "Operation completed successfully") },
    onFailure = { Log.e("zzyzx", "Operation FAILED", it) }
  )
}
```

7. To set up Kotlin codegen, add the following to the `connector.yaml` file:

```
generate:
  kotlinSdk:
    outputDir: ../../../src/main/java/com/myapplication
    package: com.myapplication
```

Replace `outputDir` with the path of the directory into which the generated code will be placed;
this path is relative to the directory that contains the yaml file itself. Replace `package` with
the desired Kotlin `package` statement to be used in the generated files.